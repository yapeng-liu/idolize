# 梦游社项目

[![CN doc](https://img.shields.io/badge/文档-中文版-blue.svg)](docoi.md)

- [1.2.2版本](#122版本)
- [1.3.0版本](#130版本)
- [1.3.1版本](#131版本)
- [1.4.0版本](#140版本)
---

### 1.2.2版本
*  时间：20230731
*  涉及组件：mysql（server_task任务表、user_task_progress用户任务进度表）
  *  任务模块：
     * 任务的创建，sql语句创建
     * 任务的展示，先查询获取server_task任务表所有任务，根据任务ID和用户ID查询user_task_progress用户任务进度表，获取不到用户进度则默认返回空
     * 任务的刷新，创建定时任务，刷新所有任务当天任务进度，根据任务类型（日常任务），每日定时刷新任务进度表中的任务进度
       * 任务的触发，在固定的事件下添加任务触发事件的代码，目前以2倍数数值与运算是否大于0来判断任务是否触发
       ~~~
         enum event {
             EventNone       = 0 ; //  占位,无意义
             SignIn          = 1 ; //  积分机器人签到事件
             ActivityLike    = 2 ; //  动态点赞事件
             ActivityComment = 4 ; //  动态评论或者回复评论事件
             ActivityCreate  = 8 ; //  动态创建事件
          }
       ~~~
*  总结：
   
### 1.3.0版本
*  时间：20230817
*  涉及组件：mysql、mangodb、mqtt
*  圈子频道-谁可发布动态：
   * 圈子频道表，设置可发布字段(release_mode 0全部成员、1指定成员)
   * 谁可以发布权限表，设置为指定成员可发布时需要查询表中圈子频道设置的权限，在圈子频道创建时默认添加不可修改的两个身份组
   * 身份组添加，操作谁可以发布权限表
   * 身份组删除，操作谁可以发布权限表
   * 发布时查询：
      * 首先查看圈子频道设置
      * 设置为全体成员则直接返回可发布
      * 设置为指定成员则需要查看和比较用户身份组信息和谁可以发布权限表，如果比对数据中存在相同数据，返回可发布，否则不可发布
*  圈子频道-修改动态所属频道：
   *  修改动态所属频道字段
*  圈子频道-增加动态仅频道可见设置：
   *  修改mangodb存储的动态 可见属性
   *  查找动态增加过滤选项
### 1.3.1版本
*  时间：20230913
*  涉及组件：mysql
*  身份组信息调整：
   *  查询请求的客户端版本进行低版本单独处理，版本隔离
*  离线推送设置
   *  腾讯云IM官网：https://cloud.tencent.com/document/product/269/2720#.E7.A6.BB.E7.BA.BF.E6.8E.A8.E9.80.81-offlinepushinfo-.E8.AF.B4.E6.98.8E
   *  配置OfflinePushInfo 离线推送 JSON 对象和前端对接
   *  视频审核由第三方数美进行审核

### 1.4.0版本
*  时间：20230817
*  涉及组件：mysql